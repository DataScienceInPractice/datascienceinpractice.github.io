

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Data Privacy &#8212; Data Science in Practice</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/mystnb.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data Analysis" href="D5_DataAnalysis.html" />
    <link rel="prev" title="Data Exploration" href="D3_DataExploration.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  
  <h1 class="site-logo" id="site-title">Data Science in Practice</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
<li class="navbar-special">
<p class="margin-caption">Tutorials</p>
</li>
  <li class="">
    <a href="../tutorials/00-Introduction.html">Introduction</a>
  </li>
  <li class="">
    <a href="../tutorials/01-Python.html">Python</a>
  </li>
  <li class="">
    <a href="../tutorials/02-JupyterNotebooks.html">Jupyter Notebooks</a>
  </li>
  <li class="">
    <a href="../tutorials/03-DataAnalysis.html">Data Analysis</a>
  </li>
  <li class="">
    <a href="../tutorials/05-DataGathering.html">Data Gathering</a>
  </li>
  <li class="">
    <a href="../tutorials/06-DataWrangling.html">Data Wrangling</a>
  </li>
  <li class="">
    <a href="../tutorials/07-DataCleaning.html">Data Cleaning</a>
  </li>
  <li class="">
    <a href="../tutorials/08-DataPrivacy&Anonymization.html">Data Privacy & Anonymization</a>
  </li>
  <li class="">
    <a href="../tutorials/09-DataVisualization.html">Data Visualization</a>
  </li>
  <li class="">
    <a href="../tutorials/10-Distributions.html">Distributions</a>
  </li>
  <li class="">
    <a href="../tutorials/11-TestingDistributions.html">Testing Distributions</a>
  </li>
  <li class="">
    <a href="../tutorials/12-StatisticalComparisons.html">Statistical Comparisons</a>
  </li>
  <li class="">
    <a href="../tutorials/13-OrdinaryLeastSquares.html">Ordinary Least Squares</a>
  </li>
  <li class="">
    <a href="../tutorials/14-LinearModels.html">Linear Models</a>
  </li>
  <li class="">
    <a href="../tutorials/15-Clustering.html">Clustering</a>
  </li>
  <li class="">
    <a href="../tutorials/16-DimensionalityReduction.html">Dimensionality Reduction</a>
  </li>
  <li class="">
    <a href="../tutorials/17-Classification.html">Classification</a>
  </li>
  <li class="">
    <a href="../tutorials/18-NaturalLanguageProcessing.html">Natural Language Processing</a>
  </li>
  <li class="">
    <a href="../tutorials/A1-PythonPackages.html">Appendix: Python Packages</a>
  </li>
  <li class="">
    <a href="../tutorials/A2-Git.html">Appendix: Version Control</a>
  </li>
<li class="navbar-special">
<p class="margin-caption">Assignments</p>
</li>
  <li class="">
    <a href="D2_Pandas.html">Pandas</a>
  </li>
  <li class="">
    <a href="D3_DataExploration.html">Data Exploration</a>
  </li>
  <li class="active">
    <a href="">Data Privacy</a>
  </li>
  <li class="">
    <a href="D5_DataAnalysis.html">Data Analysis</a>
  </li>
  <li class="">
    <a href="D6_NaturalLanguageProcessing.html">Natural Language Processing</a>
  </li>
<li class="navbar-special">
<p class="margin-caption">Project</p>
</li>
  <li class="">
    <a href="../projects/projects.html">Project Description</a>
  </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse" data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu" aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation" title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
            <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i class="fas fa-download"></i></button>

            
            <div class="dropdown-buttons">
                <!-- ipynb file if we had a myst markdown file -->
                
                <!-- Download raw file -->
                <a class="dropdown-buttons" href="../_sources/assignments/D4_DataPrivacy.ipynb"><button type="button" class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip" data-placement="left">.ipynb</button></a>
                <!-- Download PDF via print -->
                <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF" onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
            </div>
            
        </div>

        <!-- Source interaction buttons -->
        

        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->
        
    </div>
    <div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#important-reminders" class="nav-link">Important Reminders</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#overview" class="nav-link">Overview</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#part-1-web-scraping-1-25-points" class="nav-link">Part 1: Web Scraping (1.25 points)</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#scraping-rules" class="nav-link">Scraping Rules</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#a-web-scrape" class="nav-link">1a) Web Scrape</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#b-checking-scrape-contents" class="nav-link">1b) Checking Scrape Contents</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#c-extracting-tables" class="nav-link">1c) Extracting Tables</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#d-collecting-into-a-dataframe" class="nav-link">1d) Collecting into a dataframe</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#e-using-the-data" class="nav-link">1e) Using the data</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#part-2-identifying-data-3-points" class="nav-link">Part 2: Identifying Data (3 points)</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#a-load-in-the-cleaned-data" class="nav-link">2a) Load in the ‘cleaned’ data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#b-check-the-first-10-emails" class="nav-link">2b) Check the first 10 emails</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#c-extract-the-company-name-from-the-email" class="nav-link">2c) Extract the Company Name From the Email</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#d-load-in-employee-data" class="nav-link">2d) Load in employee data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#e-match-the-employee-name-with-company-age-gender" class="nav-link">2e) Match the employee name with company, age, gender</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#f-extract-all-the-private-data" class="nav-link">2f) Extract all the private data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#g-add-the-names-to-the-original-secure-dataset" class="nav-link">2g) Add the names to the original ‘secure’ dataset!</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#part-3-anonymize-data-3-25-points" class="nav-link">Part 3: Anonymize Data (3.25 points)</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#a-load-in-personal-data" class="nav-link">3a) Load in personal data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#b-drop-personal-attributes" class="nav-link">3b) Drop personal attributes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#c-drop-ages-that-are-above-90" class="nav-link">3c) Drop ages that are above 90</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#d-load-in-zip-code-data" class="nav-link">3d) Load in zip code data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#e-sort-zipcodes-into-geographic-subdivision" class="nav-link">3e) Sort zipcodes into “Geographic Subdivision”</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#f-masking-the-zip-codes" class="nav-link">3f) Masking the Zip Codes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#g-save-out-the-properly-anonymized-data-to-json-file" class="nav-link">3g) Save out the properly anonymized data to json file</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#complete" class="nav-link">Complete!</a>
        </li>
    
    </ul>
</nav>


    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="data-privacy">
<h1>Data Privacy<a class="headerlink" href="#data-privacy" title="Permalink to this headline">¶</a></h1>
<p>This is a demo assignment that is openly available for the Data Science in Practice Course.</p>
<div class="alert alert-danger">
If you are in the COGS108 course at UC San Diego, this is NOT a valid version of the assignment for the course.
</div><div class="section" id="important-reminders">
<h2>Important Reminders<a class="headerlink" href="#important-reminders" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Do not change / update / delete any existing cells with ‘assert’ in them. These are the tests used to check your assignment.</p></li>
<li><p>This assignment has hidden tests: tests that are not visible here, but that will be run on your submitted file. Passing all the tests you can see in the notebook here does not guarantee you have the right answer.</p></li>
</ul>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>We have briefly discussed in lecture the importance and the mechanics of protecting individuals’ privacy when they are included in datasets.</p>
<p>One method to do so is the Safe Harbor Method. The Safe Harbor method specifies how to protect individuals’ identities by telling us which information to remove from a dataset in order to avoid accidently disclosing personal information.</p>
<p>In this assignment, we will explore web scraping, which can often include personally identifiable information, how identity can be decoded from badly anonymized datasets, and also explore using Safe Harbor to anonymize datasets properly.</p>
<p>The topics covered in this assignment are mainly covered in the ‘DataGathering’ and ‘DataPrivacy&amp;Anonymization’ COGS 108 <a class="reference external" href="https://github.com/COGS108/Tutorials">Tutorial notebooks</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Imports - these are provided for you. Do not import any other packages.</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">bs4</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="part-1-web-scraping-1-25-points">
<h2>Part 1: Web Scraping (1.25 points)<a class="headerlink" href="#part-1-web-scraping-1-25-points" title="Permalink to this headline">¶</a></h2>
<div class="section" id="scraping-rules">
<h3>Scraping Rules<a class="headerlink" href="#scraping-rules" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>If you are using another organization’s website for scraping, make sure to check the website’s terms &amp; conditions.</p></li>
<li><p>Do not request data from the website too aggressively (quickly) with your program (also known as spamming), as this may break the website. Make sure your program behaves in a reasonable manner (i.e. acts like a human). One request for one webpage per second is good practice.</p></li>
<li><p>The layout of a website may change from time to time. Because of this, if you’re scraping a website, make sure to revisit the site and rewrite your code as needed.</p></li>
</ol>
</div>
<div class="section" id="a-web-scrape">
<h3>1a) Web Scrape<a class="headerlink" href="#a-web-scrape" title="Permalink to this headline">¶</a></h3>
<p>We will first retrieve the contents on a page and examine them a bit.</p>
<p>Make a variable called <code class="docutils literal notranslate"><span class="pre">wiki</span></code>, that stores the following URL (as a string):
https://en.wikipedia.org/wiki/List_of_states_and_territories_of_the_United_States_by_population</p>
<p>Now, to open the URL, use <code class="docutils literal notranslate"><span class="pre">requests.get()</span></code> and provide <code class="docutils literal notranslate"><span class="pre">wiki</span></code> as its input. Store this in a variable called <code class="docutils literal notranslate"><span class="pre">page</span></code>.</p>
<p>After that, make a variable called <code class="docutils literal notranslate"><span class="pre">soup</span></code> to parse the HTML using <code class="docutils literal notranslate"><span class="pre">BeautifulSoup</span></code>. Consider that there will be a method from <code class="docutils literal notranslate"><span class="pre">BeautifulSoup</span></code> that you’ll need to call on to get the content from the page.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

<span class="n">wiki</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">wiki</span>
<span class="k">assert</span> <span class="n">page</span>
<span class="k">assert</span> <span class="n">soup</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="b-checking-scrape-contents">
<h3>1b) Checking Scrape Contents<a class="headerlink" href="#b-checking-scrape-contents" title="Permalink to this headline">¶</a></h3>
<p>Extract the title from the page and save it in a variable called <code class="docutils literal notranslate"><span class="pre">title_page</span></code>.</p>
<p>Make sure you extract it as a string.</p>
<p>To do so, you have to use the soup object created in the above cell.
Hint: from your soup variable, you can access this with <code class="docutils literal notranslate"><span class="pre">.title.string</span></code>.</p>
<p>Make sure you print out and check the contents of <code class="docutils literal notranslate"><span class="pre">title_page</span></code>.</p>
<p>Note that it should not have any tags (such as <code class="docutils literal notranslate"><span class="pre">&lt;title&gt;</span></code> included in it).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">title_page</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">title_page</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="c-extracting-tables">
<h3>1c) Extracting Tables<a class="headerlink" href="#c-extracting-tables" title="Permalink to this headline">¶</a></h3>
<p>In order to extract the data we want, we’ll start with extracting a data table of interest.</p>
<p>Note that you can see this table by going to look at the link we scraped.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">soup</span></code> object and call a method called <code class="docutils literal notranslate"><span class="pre">find</span></code>, which will find and extract the first table in the scraped webpage. Store this in the variable <code class="docutils literal notranslate"><span class="pre">right_table</span></code>.</p>
<p>Note: you need to search for the name <code class="docutils literal notranslate"><span class="pre">table</span></code>, and set the <code class="docutils literal notranslate"><span class="pre">class_</span></code> argument as <code class="docutils literal notranslate"><span class="pre">wikitable</span> <span class="pre">sortable</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">right_table</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_table</span><span class="p">,</span> <span class="n">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">right_table</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;table&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Now, you’ll extract the data from the table into lists.</p>
<p>Note: This code is provided for you. Do read through it and try to see how it works.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># CODE PROVIDED</span>
<span class="c1"># YOU SHOULD NOT HAVE TO EDIT</span>
<span class="c1"># BUT YOU WILL WANT TO UNDERSTAND</span>
<span class="n">list_a</span><span class="p">,</span> <span class="n">list_b</span><span class="p">,</span> <span class="n">list_c</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">right_table</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">):</span>
    
    <span class="n">cells</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span>
    
    <span class="c1"># Skips rows that aren&#39;t 10 columns long (like the heading)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">12</span><span class="p">:</span>
        <span class="k">continue</span>

    <span class="c1"># This catches when the name cells stops having a link</span>
    <span class="c1">#  and ends, skipping the last (summary rows)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">list_a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">list_b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">list_c</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="d-collecting-into-a-dataframe">
<h3>1d) Collecting into a dataframe<a class="headerlink" href="#d-collecting-into-a-dataframe" title="Permalink to this headline">¶</a></h3>
<p>Create a dataframe <code class="docutils literal notranslate"><span class="pre">my_df</span></code> and add the data from the lists above to it.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list_a</span></code> is the state or territory name. Set the column name as <code class="docutils literal notranslate"><span class="pre">State</span></code>, and make this the index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list_b</span></code> is the population estimate. Add it to the dataframe, and set the column name as <code class="docutils literal notranslate"><span class="pre">Population</span> <span class="pre">Estimate</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list_c</span></code> is the census population. Add it to the dataframe, and set the column name as <code class="docutils literal notranslate"><span class="pre">Census</span> <span class="pre">Population</span></code></p></li>
</ul>
<p>make sure to check the head of your dataframe to see that everything looks right! ie: my_df.head()</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span> <span class="p">(</span><span class="n">my_df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">my_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;State&#39;</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">my_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;Population Estimate&#39;</span><span class="p">,</span> <span class="s1">&#39;Census Population&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="e-using-the-data">
<h3>1e) Using the data<a class="headerlink" href="#e-using-the-data" title="Permalink to this headline">¶</a></h3>
<p>What is the Population Estimate of California? Save this answer to a variable called <code class="docutils literal notranslate"><span class="pre">ca_pop</span></code>
Notes:</p>
<ul class="simple">
<li><p>Extract this value programmatically from your dataframe (as in, don’t set it explicitly as <code class="docutils literal notranslate"><span class="pre">ca_pop</span> <span class="pre">=</span> <span class="pre">123</span></code>)</p></li>
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">.loc</span></code> to extract a particular value from a dataframe.</p></li>
<li><p>The data in your dataframe will be strings - that’s fine, leave them as strings (don’t typecast).</p></li>
<li><p>Strip any whitespace/newline characters from this string, if necessary. (<code class="docutils literal notranslate"><span class="pre">rstrip()</span></code> may be helpful)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">ca_pop</span>

</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="part-2-identifying-data-3-points">
<h2>Part 2: Identifying Data (3 points)<a class="headerlink" href="#part-2-identifying-data-3-points" title="Permalink to this headline">¶</a></h2>
<p>Data Files:</p>
<ul class="simple">
<li><p>anon_user_dat.json</p></li>
<li><p>employee_info.json</p></li>
</ul>
<p>You will first be working with a file called ‘anon_user_dat.json’. This file contains information about some (fake) Tinder users. When creating an account, each Tinder user was asked to provide their first name, last name, work email (to verify the disclosed workplace), age, gender, phone # and zip code. Before releasing this data, a data scientist cleaned the data to protect the privacy of Tinder’s users by removing the obvious personal identifiers: phone #, zip code, and IP address. However, the data scientist chose to keep each users’ email addresses because when they visually skimmed a couple of the email addresses none of them seemed to have any of the users’ actual names in them. This is where the data scientist made a huge mistake!</p>
<p>We will take advantage of having the work email addresses by finding the employee information of different companies and matching that employee information with the information we have, in order to identify the names of the secret Tinder users!</p>
<div class="section" id="a-load-in-the-cleaned-data">
<h3>2a) Load in the ‘cleaned’ data<a class="headerlink" href="#a-load-in-the-cleaned-data" title="Permalink to this headline">¶</a></h3>
<p>Load the <code class="docutils literal notranslate"><span class="pre">anon_user_dat.json</span></code> json file into a pandas dataframe. Call it <code class="docutils literal notranslate"><span class="pre">df_personal</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df_personal</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="b-check-the-first-10-emails">
<h3>2b) Check the first 10 emails<a class="headerlink" href="#b-check-the-first-10-emails" title="Permalink to this headline">¶</a></h3>
<p>Save the first 10 emails to a Series, and call it <code class="docutils literal notranslate"><span class="pre">sample_emails</span></code>.
You should then print out this Series. ( Use print() )</p>
<p>The purpose of this is to get a sense of how these work emails are structured and how we could possibly extract where each anonymous user seems to work.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sample_emails</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="c-extract-the-company-name-from-the-email">
<h3>2c) Extract the Company Name From the Email<a class="headerlink" href="#c-extract-the-company-name-from-the-email" title="Permalink to this headline">¶</a></h3>
<p>Create a function with the following specifications:</p>
<ul class="simple">
<li><p>Function Name: extract_company</p></li>
<li><p>Purpose: to extract the company of the email (i.e., everything after the &#64; sign but before the first .)</p></li>
<li><p>Parameter(s): email (string)</p></li>
<li><p>Returns: The extracted part of the email (string)</p></li>
<li><p>Hint: This should take 1 line of code. Look into the find(‘’) method.</p></li>
</ul>
<p>You can start with this outline:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">extract_company</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>Example Usage:</p>
<ul class="simple">
<li><p>extract_company(“larhe&#64;uber.com”) should return “uber”</p></li>
<li><p>extract_company(“ds&#64;cogs.edu”) should return “cogs”</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">extract_company</span><span class="p">(</span><span class="s2">&quot;gshoreson0@seattletimes.com&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;seattletimes&quot;</span>
<span class="k">assert</span> <span class="n">extract_company</span><span class="p">(</span><span class="s2">&quot;amcgeffen1d@goo.ne.jp&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;goo&#39;</span>
                       
</pre></div>
</div>
</div>
</div>
<p>With a little bit of basic sleuthing (aka googling) and web-scraping (aka selectively reading in html code) it turns out that you’ve been able to collect information about all the present employees/interns of the companies you are interested in. Specifically, on each company website, you have found the name, gender, and age of its employees. You have saved that info in employee_info.json and plan to see if, using this new information, you can match the Tinder accounts to actual names.</p>
</div>
<div class="section" id="d-load-in-employee-data">
<h3>2d) Load in employee data<a class="headerlink" href="#d-load-in-employee-data" title="Permalink to this headline">¶</a></h3>
<p>Load the json file into a pandas dataframe. Call it <code class="docutils literal notranslate"><span class="pre">df_employee</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df_employee</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="e-match-the-employee-name-with-company-age-gender">
<h3>2e) Match the employee name with company, age, gender<a class="headerlink" href="#e-match-the-employee-name-with-company-age-gender" title="Permalink to this headline">¶</a></h3>
<p>Create a function with the following specifications:</p>
<ul class="simple">
<li><p>Function name: employee_matcher</p></li>
<li><p>Purpose: to match the employee name with the provided company, age, and gender</p></li>
<li><p>Parameter(s): company (string), age (int), gender (string)</p></li>
<li><p>Returns: The employee first_name and last_name like this: return first_name, last_name</p></li>
<li><p>Note: If there are multiple employees that fit the same description, first_name and last_name should return a list of all possible first names and last names i.e., [‘Desmund’, ‘Kelby’], [‘Shepley’, ‘Tichner’]. Note that the names of the individuals that would produce this output are ‘Desmund Shepley’ and ‘Kelby Tichner’.</p></li>
</ul>
<p>Hint:
There are many different ways to code this. An inelegant solution is to loop through <code class="docutils literal notranslate"><span class="pre">df_employee</span></code>
and for each data item see if the company, age, and gender match
i.e.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_employee</span><span class="p">)):</span>
          <span class="k">if</span> <span class="p">(</span><span class="n">company</span> <span class="o">==</span> <span class="n">df_employee</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;company&#39;</span><span class="p">]):</span>
</pre></div>
</div>
<p>However! The solution above is very inefficient and long, so you should try to look into this:
Google the df.loc method: It extracts pieces of the dataframe
if it fulfills a certain condition.
i.e.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_employee</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_employee</span><span class="p">[</span><span class="s1">&#39;company&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">company</span><span class="p">]</span>
</pre></div>
</div>
<p>If you need to convert your pandas data series into a list, you can do <code class="docutils literal notranslate"><span class="pre">list(result)</span></code> where result is a pandas “series”</p>
<p>You can start with this outline:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">employee_matcher</span><span class="p">(</span><span class="n">company</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">gender</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">employee_matcher</span><span class="p">(</span><span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="s2">&quot;Male&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">([</span><span class="s1">&#39;Maxwell&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Jorio&#39;</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">employee_matcher</span><span class="p">(</span><span class="s2">&quot;salon&quot;</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="s2">&quot;Female&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">([</span><span class="s1">&#39;Elenore&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Gravett&#39;</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">employee_matcher</span><span class="p">(</span><span class="s2">&quot;webmd&quot;</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="s2">&quot;Nonbinary&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">([</span><span class="s1">&#39;Zaccaria&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Bartosiak&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="f-extract-all-the-private-data">
<h3>2f) Extract all the private data<a class="headerlink" href="#f-extract-all-the-private-data" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Create 2 empty lists called <code class="docutils literal notranslate"><span class="pre">first_names</span></code> and <code class="docutils literal notranslate"><span class="pre">last_names</span></code></p></li>
<li><p>Loop through all the people we are trying to identify in df_personal</p></li>
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">extract_company</span></code> function (i.e., <code class="docutils literal notranslate"><span class="pre">extract_company(df_personal.loc[i,</span> <span class="pre">'email'])</span></code> )</p></li>
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">employee_matcher</span></code> function</p></li>
<li><p>Append the results of <code class="docutils literal notranslate"><span class="pre">employee_matcher</span></code> to the appropriate lists (<code class="docutils literal notranslate"><span class="pre">first_names</span></code> and <code class="docutils literal notranslate"><span class="pre">last_names</span></code>)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">first_names</span><span class="p">[</span><span class="mi">45</span><span class="p">:</span><span class="mi">50</span><span class="p">]</span><span class="o">==</span> <span class="p">[[</span><span class="s1">&#39;Justino&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Tadio&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Kennith&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Cedric&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Amargo&#39;</span><span class="p">]]</span>
<span class="k">assert</span> <span class="n">last_names</span><span class="p">[</span><span class="mi">45</span><span class="p">:</span><span class="mi">50</span><span class="p">]</span> <span class="o">==</span> <span class="p">[[</span><span class="s1">&#39;Corro&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Blackford&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Milton&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Yggo&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Grigor&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="g-add-the-names-to-the-original-secure-dataset">
<h3>2g) Add the names to the original ‘secure’ dataset!<a class="headerlink" href="#g-add-the-names-to-the-original-secure-dataset" title="Permalink to this headline">¶</a></h3>
<p>We have done this last step for you below, all you need to do is run this cell.</p>
<p>For your own personal enjoyment, you should also print out the new <code class="docutils literal notranslate"><span class="pre">df_personal</span></code> with the identified people.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_personal</span><span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_names</span>
<span class="n">df_personal</span><span class="p">[</span><span class="s1">&#39;last_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_names</span>
</pre></div>
</div>
</div>
</div>
<p>We have now just discovered the ‘anonymous’ identities of all the registered Tinder users…awkward.</p>
</div>
</div>
<div class="section" id="part-3-anonymize-data-3-25-points">
<h2>Part 3: Anonymize Data (3.25 points)<a class="headerlink" href="#part-3-anonymize-data-3-25-points" title="Permalink to this headline">¶</a></h2>
<p>You are hopefully now convinced that with some seemingly harmless data a hacker can pretty easily discover the identities of certain users. Thus, we will now clean the original Tinder data ourselves according to the Safe Harbor Method in order to make sure that it has been <em>properly</em> cleaned…</p>
<div class="section" id="a-load-in-personal-data">
<h3>3a) Load in personal data<a class="headerlink" href="#a-load-in-personal-data" title="Permalink to this headline">¶</a></h3>
<p>Load the <code class="docutils literal notranslate"><span class="pre">user_dat.csv</span></code> file into a pandas dataframe, being sure to read the zip codes (<code class="docutils literal notranslate"><span class="pre">zip</span></code>) in as a string.</p>
<p>Store this in <code class="docutils literal notranslate"><span class="pre">df_users</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df_users</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="b-drop-personal-attributes">
<h3>3b) Drop personal attributes<a class="headerlink" href="#b-drop-personal-attributes" title="Permalink to this headline">¶</a></h3>
<p>Remove any personal information, following the Safe Harbor method.
Based on the Safe Harbor method, remove any columns from <code class="docutils literal notranslate"><span class="pre">df_users</span></code> that contain personal information.</p>
<p>Note that details on the Safe Harbor method are covered in the Tutorials.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_users</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="c-drop-ages-that-are-above-90">
<h3>3c) Drop ages that are above 90<a class="headerlink" href="#c-drop-ages-that-are-above-90" title="Permalink to this headline">¶</a></h3>
<p>Safe Harbor rule C: Drop all the rows which have age greater than 90 from <code class="docutils literal notranslate"><span class="pre">df_users</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">df_users</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">943</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="d-load-in-zip-code-data">
<h3>3d) Load in zip code data<a class="headerlink" href="#d-load-in-zip-code-data" title="Permalink to this headline">¶</a></h3>
<p>Load the zip_pop.csv file into a (different) pandas dataframe. Call it <code class="docutils literal notranslate"><span class="pre">df_zip</span></code>.</p>
<p>Note that the zip data should be read in as strings, not ints, as would be the default.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>, use the parameter <code class="docutils literal notranslate"><span class="pre">dtype</span></code> to specify to read <code class="docutils literal notranslate"><span class="pre">zip</span></code> as str, and <code class="docutils literal notranslate"><span class="pre">population</span></code> as int.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df_zip</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="e-sort-zipcodes-into-geographic-subdivision">
<h3>3e) Sort zipcodes into “Geographic Subdivision”<a class="headerlink" href="#e-sort-zipcodes-into-geographic-subdivision" title="Permalink to this headline">¶</a></h3>
<p>The Safe Harbor Method applies to “Geographic Subdivisions” as opposed to each zipcode itself.</p>
<p>Geographic Subdivision: All areas which share the first 3 digits of a zip code</p>
<p>Count the total population for each geographic subdivision, storing the first 3 digits of the zip code and its corresponding population in the dictionary <code class="docutils literal notranslate"><span class="pre">zip_dict</span></code>. (For example, if there were 20 people whose zip code started with 090, the key-value pair in <code class="docutils literal notranslate"><span class="pre">zip_dict</span></code> would be <code class="docutils literal notranslate"><span class="pre">{'090'</span> <span class="pre">:</span> <span class="pre">20}</span></code>.)</p>
<p>You may be tempted to write a gnarly loop to accomplish this. Avoid that temptation. Instead, you’ll want to be savy with a dictionary and <code class="docutils literal notranslate"><span class="pre">groupby</span></code> from <code class="docutils literal notranslate"><span class="pre">pandas</span></code> here.</p>
<p>To get you started…</p>
<p>If you wanted to group by whole zip code, you could use something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_zip</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">df_zip</span><span class="p">[</span><span class="s1">&#39;zip&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>But, we don’t want to group by the <em>entire</em> zip code. Instead, we want to extract the first 3 digits of a zip code, and group by that.</p>
<p>To extract the first three digits, you could so something like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_zip</span><span class="p">[</span><span class="s1">&#39;zip&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>You’ll want to combine these two concepts, such that you store this information in a dictionary <code class="docutils literal notranslate"><span class="pre">zip_dict</span></code>, which stores the first three digits of the zip code as the key and the population of that 3-digit zip code as the value.</p>
<p>(If you’re stuck and/or to better understand how dictionaries work and how they apply to this concept, check the section materials, use google, and go to discussion sections!)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">zip_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">zip_dict</span><span class="p">[</span><span class="s1">&#39;100&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1502501</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="f-masking-the-zip-codes">
<h3>3f) Masking the Zip Codes<a class="headerlink" href="#f-masking-the-zip-codes" title="Permalink to this headline">¶</a></h3>
<p>In this part, you should write a for loop, updating the <code class="docutils literal notranslate"><span class="pre">df_users</span></code> dataframe.</p>
<p>Go through each user, and update their zip code, to Safe Harbor specifications:</p>
<ul class="simple">
<li><p>If the user is from a zip code for the which the “Geographic Subdivision” is less than equal to 20,000, change the zip code in df_users to ‘0’ (as a string)</p></li>
<li><p>Otherwise, zip should be only the first 3 numbers of the full zip code</p></li>
<li><p>Do all this by directly updating the <code class="docutils literal notranslate"><span class="pre">zip</span></code> column of the <code class="docutils literal notranslate"><span class="pre">df_users</span></code> DataFrame</p></li>
</ul>
<p>Hints:</p>
<ol class="simple">
<li><p>This will be several lines of code, looping through the DataFrame, getting each zip code, checking the geographic subdivision with the population in <code class="docutils literal notranslate"><span class="pre">zip_dict</span></code>, and setting the <code class="docutils literal notranslate"><span class="pre">zip_code</span></code> accordingly.</p></li>
<li><p>Be very aware of your variable types when working with zip codes here.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_users</span><span class="p">)</span> <span class="o">==</span> <span class="mi">943</span>
<span class="k">assert</span> <span class="n">df_users</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">671</span><span class="p">,</span> <span class="s1">&#39;zip&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;687&#39;</span>
<span class="k">assert</span> <span class="nb">sum</span><span class="p">(</span><span class="n">df_users</span><span class="o">.</span><span class="n">zip</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="g-save-out-the-properly-anonymized-data-to-json-file">
<h3>3g) Save out the properly anonymized data to json file<a class="headerlink" href="#g-save-out-the-properly-anonymized-data-to-json-file" title="Permalink to this headline">¶</a></h3>
<p>Save out <code class="docutils literal notranslate"><span class="pre">df_users</span></code> as a json file, called <code class="docutils literal notranslate"><span class="pre">real_anon_user_dat.json</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;real_anon_user_dat.json&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="complete">
<h2>Complete!<a class="headerlink" href="#complete" title="Permalink to this headline">¶</a></h2>
<p>Congrats, you’re done! The users’ identities are much more protected now.</p>
<p>Have a look back over your answers, and also make sure to <code class="docutils literal notranslate"><span class="pre">Restart</span> <span class="pre">&amp;</span> <span class="pre">Run</span> <span class="pre">All</span></code> from the kernel menu to double check that everything is working properly. You can also use the ‘Validate’ button above, which runs your notebook from top to bottom and checks to ensure all <code class="docutils literal notranslate"><span class="pre">assert</span></code> statements pass silently. When you are ready, submit on datahub!</p>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="D3_DataExploration.html" title="previous page">Data Exploration</a>
    <a class='right-next' id="next-link" href="D5_DataAnalysis.html" title="next page">Data Analysis</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Thomas Donoghue, Bradley Voytek, & Shannon Ellis<br/>
        
            &copy; Copyright 2020-.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>